<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./css/journal_uc.min-1683811901.css"  type="text/css">
  <link rel="stylesheet" href="./css/ccdGuideline.css"  type="text/css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,500;0,900;1,300;1,500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./css/color-code_LOE_COR.css" type="text/css">
  <title>CCD Guidelines Interactive Tool</title>
</head>

<script>//set default button empty state object
  let buttonSelection = {}

  function setbuttonSelectionToEmpty(){
    buttonSelection =
        {
            "mi": "",
            "diabetes": "",
            "hxHFrEF": "",
            "LVEFlessOrEqual40": "",
            "LVEF41to49": "",
            "LVEFgreaterOrEqual50": "",
            "LDL-C_goal": "",
            "maxStatin": "",
            "betaBlocker": "",
            "bloodPressureGoal": "",
            "angina": ""
        }
    }
    setbuttonSelectionToEmpty()

  ///  spreadsheet data as nested object

let  categoryNames =
[
    "SGLT2 Inhibitors and GLP-1 Receptor Agonists",
    "Beta Blockers",
    "Lipid Management",
    "Blood Pressur Management",
    "Renin Angiotensin Aldosterone Inhibitors",
    "Medical Therapy for Relief of Angina",
    "Antiplatelet Therapy and Oral Anticoagulants",
    "Colchicine",
    "Nutrition Supplements"
]

let guidlineLinkoutInfo = {
    "SGLT2 Inhibitors and GLP-1 Receptor Agonists":
        {
        "text": "4.2.8. SGLT2 Inhibitors and GLP-1 Receptor Agonists",
       "url": "www.jacc.org"
      },
  "Beta Blockers":
      {
        "text": "4.3.2. Beta Blockers",
       "url": "www.jacc.org"
      },
  "Lipid Management":
      {
        "text": "4.2.6. Lipid Management",
       "url": "www.jacc.org"
      },
  "Blood Pressure Management":
        {
        "text": "4.2.7. Blood Pressure Management ",
       "url": "www.jacc.org"
      },
  "Renin-Angiotensin-Aldosterone Inhibitors":
      {
        "text": "4.3.3. Renin-Angiotensin-Aldosterone Inhibitors ",
       "url": "www.jacc.org"
      },
  "Medical Therapy for Relief of Angina":
      {
        "text": "4.3.6. Medical Therapy for Relief of Angina",
       "url": "www.jacc.org"
      },
  "Antiplatelet Therapy and Oral Anticoagulants":
      {
        "text": "4.3.1. Antiplatelet Therapy and Oral Anticoagulants",
       "url": "www.jacc.org"
      },
  "Colchicine" :
      {
        "text": "4.3.4. Colchicine ",
       "url": "www.jacc.org"
      },
 "Nutrition Supplements":
      {
        "text": "4.2.1. Nutrition, Including Supplements",
       "url": "www.jacc.org"
      }
    }

  </script>
<body>


  <style>
    body {
      font-family: "Roboto", Arial, Helvetica, sans-serif;
    }

    .flex_basis-50 {
      flex-basis: 50%;
    }

    .ccdSelectedTab {
      background-color: var(--start-color);
      color: #fff;
      position: relative;
    }

    .ccdSelectedTab:after {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: -1px;
      border-bottom: 10px solid #eaeff3;
      border-left: 11px solid transparent;
      border-right: 11px solid transparent;
      border-top: 11px solid transparent;
    }

    .question {
      font-weight: 300;
      font-size: 1.4rem;
    }

    .bg_alert {
      background-color: rgb(207, 76, 76);
    }

    .bg_green {
      background-color: rgb(12, 131, 82);
    }

    .bg_grey {
      background-color: rgb(156, 156, 156);
    }

    .texture_cross{
        background: #717171 url('https://assets.acc.org/Arches/4.1.37909/dist/img/cross_color.png');
    }


    /* ////////////// */

    .evalRestartText {
      position: relative;
    }

    .evalRestartText:before {
      content: url('./imgs/icon-restart.svg');
      width: 20px;
      height: 20px;
      left: .3rem;
      margin: 0;
      padding: 0;
      position: absolute;
    }
  </style>

  <main class="ccdGuidlineMain  flex flex_column m_auto  max-w_30 max-w_60:md bg_acc-4 br_1 br_primary br_solid">
    <div class="ccdGuidlineHeader  text_center  ">
        <h1 class="font_4 m-b_n3 ">JACC Chronic Coronary Disease Guideline Interactive Tool: Reevaluating Medications at Every Visit</h1>
        <h2 class="font_1 font_light">Use this tool to reevaluate chronic coronary disease patient medications at every visit.</h2>
    </div>
    <section class="selectedEvalOrRec flex flex_row  h_auto justify_around br_1 br_primary br_solid text_center">
      <div id="btnTabEval" class="ccdSelectedTab flex_basis-50   font_2 p_4">Evaluate</div>
      <div id="btnTabRec" class=" flex_basis-50 font_2 p_4">Recommendations</div>
    </section>
    <section
      class="toggleEvalrecs flex flex_column items_start justify_start toggleEvalrecs w_100 p_3 p-t_0 bg_white-6 min-h_80 m-b_5">

      <div id="displayEvalQuestions"  class="w_100">

        <div class="ccdQsReset flex flex_row c_secondary-1  w_100 justify_between">
          <div class="left ccdQsReset">

          </div>
          <div class="right"></div>
          <div class="flex flex-column">
            <div>
              <div id="btnResetAll" class=" flex flex_row justify_between">
                <div>
                  <p class="evalRestartText h:bg_primary h:c_white br_radius m-b_2 p-l_5 p_3 bg_primary-4 m-b_3 "> Reset All
                  </p>
                </div>
              </div>
            </div>
          </div>

        </div>


        <div class="questionsBox br_1 br_primary br_solid p_2 w_100 bg_white">
          <div
            class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3 br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                MI within last year
              </div>
              <div class="tooltip-container m-l_3">
                <i class="info-icon material-icons"><img src="./imgs/icon-question-gray.png"></i>
                <div class="tooltip-content">
                  <p>This panel displays a summary.</p>
                </div>
              </div>
            </div>
            <div id="mi" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div
            class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3 br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                Type 2 diabetes?
              </div>
            </div>
            <div id="diabetes" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>

          <div
            class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3 br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                History of HFrEF?
              </div>
            </div>
            <div id="hxHFrEF" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div class="question flex flex_column flex_row:md justify_between p-b_3 m-b_3 br-b_1 br_solid br_primary-3">
            <div class="flex flex_row items_center justify_between left m-l_4 ">

                <div>
                  LVEF
                </div>
              </div>
              <div  class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
                <div
                  id="LVEFlessOrEqual40" class="btnLVEF bg_grey br_radius a:bg_alert c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light" data-yn="N">
                  &leq; 40%</div>
                <div
                  id="LVEF41to49" class="btnLVEF bg_grey br_radius  c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light" data-yn="N">
                  41-49%</div>
                <div
                  id="LVEFgreaterOrEqual50" class="btnLVEF bg_grey br_radius  c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light" data-yn="N">
                  &geq; 50%</div>
              </div>

          </div>



          <div class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                LDL-C at goal
              </div>
              <div class="tooltip-container m-l_3">
                <i class="info-icon material-icons"><img src="./imgs/icon-question-gray.png"></i>
                <div class="tooltip-content">
                  <p>LDL-C ≥ 70 mg/dL</p>
                </div>
              </div>
            </div>
            <div id="LDL-C_goal" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                On maximally tolerated statin therapy?
              </div>
            </div>
            <div id="maxStatin" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                On a beta-blocker?
              </div>
            </div>
            <div id="betaBlocker" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div class="question flex flex_column flex_row:md justify_between br-b_1 br_solid br_primary-3 m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                Blood pressure at goal?
              </div>
              <div class="tooltip-container m-l_3 ">
                <i class="info-icon material-icons"><img src="./imgs/icon-question-gray.png"></i>
                <div class="tooltip-content">
                  <p>BP&gt; 130&Backslash;&lt;80 mm Hg</p>
                </div>
              </div>
            </div>
            <div id="bloodPressureGoal" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>


          <div class="question flex flex_column flex_row:md justify_between m-b_3">
            <div class="left flex flex_row items_center m-l_4">
              <div>
                Angina?
              </div>
            </div>
            <div id="angina" class="flex flex_row gap_3 btnSet m-l_4 m-t_2 m-b_3" data-selected-choice="">
              <div
                class="bg_grey br_radius btnYes c_white h:bg_success h:c_white p-x_4 p-y_3 text_center shadow_overlap-light " data-yn="Y">
                Yes</div>
              <div
                class="btnNo  h:bg_alert h:c_white p-x_4 p-y_3 bg_grey c_white text_center br_radius shadow_overlap-light" data-yn="N">
               No</div>
            </div>
          </div>



          <div id='btnCCD_Submit'
            class="btnSubmit texture_cross p_4 c_white bg_grey h:bg_primary-3 h:bg_accent-2 h:c_alert m_3 m-t_5 w_40 m-r_0 float_right font_2 br_radius text_center">
            Submit
          </div>


        </div>
      </div>


      <div id="displayReturnRecs" class="display_none w_100">
      <div id="recsDefault" class="br_1 br_primary br_solid font_2 font_light p_2 p_4 m-t_4 bg_white">
                    Please complete all of the evaluation questions in  the Evaluate tab then click submit to see recommendations here
                </div>


      </div>

    </section>
  </main>





<script>
  let selectedDiv = document.querySelector("#displayReturnRecs")
  let guidelineDivParent


  let automaticRecs = `
<div class="br_1 br_primary br_solid font_2 font_light p_2 p_3 m-t_4 bg_white"><div class="br-b_1 br_solid br_primary-3 flex" data-category="Antiplatelet Therapy and Oral Anticoagulants" id="Antiplatelet Therapy and Oral Anticoagulants"><img src="./imgs/tempimage.png" alt="icon SGLT2_Inhibitors_GLP1_Receptor_Agonists" class="aspect_1x1 h_2xlh m-t_0 m_3 p-t_0 w_10"><h1 class="font_2 c_primary font_medium p-b_1 p-t_0 p_2 m-t_0">Antiplatelet Therapy and Oral Anticoagulants</h1></div><div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-I h_10 w_10 flex items_center justify_center c_white">1</div><div class="guidelineItem p-l_4 w_90 flex items_center">See guideline for information on Antiplatelet Therapy and Oral Anticoagulants.</div></div><div class="br-b_1 br_solid br_primary-5 p-b_2"></div><div><span class="font_0 c_primary-2 m-t_3">See full Guideline: </span><span><a href="www.jacc.org" target="_blank" class="font_0 c_accent h:c_accent-3 m-t_3 underline">4.3.1. Antiplatelet Therapy and Oral Anticoagulants</a></span></div></div><div class="br_1 br_primary br_solid font_2 font_light p_2 p_3 m-t_4 bg_white"><div class="br-b_1 br_solid br_primary-3 flex" data-category="Colchicine" id="Colchicine"><img src="./imgs/tempimage.png" alt="icon SGLT2_Inhibitors_GLP1_Receptor_Agonists" class="aspect_1x1 h_2xlh m-t_0 m_3 p-t_0 w_10"><h1 class="font_2 c_primary font_medium p-b_1 p-t_0 p_2 m-t_0">Colchicine</h1></div><div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-IIB h_10 w_10 flex items_center justify_center c_white">2b</div><div class="guidelineItem p-l_4 w_90 flex items_center">Colchicine for secondary prevention may be considered</div></div><div class="br-b_1 br_solid br_primary-5 p-b_2"></div><div><span class="font_0 c_primary-2 m-t_3">See full Guideline: </span><span><a href="www.jacc.org" target="_blank" class="font_0 c_accent h:c_accent-3 m-t_3 underline">4.3.4. Colchicine </a></span></div></div><div class="br_1 br_primary br_solid font_2 font_light p_2 p_3 m-t_4 bg_white"><div class="br-b_1 br_solid br_primary-3 flex" data-category="Nutrition Supplements" id="Nutrition Supplements"><img src="./imgs/tempimage.png" alt="icon SGLT2_Inhibitors_GLP1_Receptor_Agonists" class="aspect_1x1 h_2xlh m-t_0 m_3 p-t_0 w_10"><h1 class="font_2 c_primary font_medium p-b_1 p-t_0 p_2 m-t_0">Nutrition Supplements</h1></div><div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-III h_10 w_10 flex items_center justify_center c_white">3</div><div class="guidelineItem p-l_4 w_90 flex items_center"><div>Use of nonprescription or dietary supplements is not beneficial <span class="font_medium">(COR  3 No Benefit)</span></div>  </div></div><div class="br-b_1 br_solid br_primary-5 p-b_2"></div><div><span class="font_0 c_primary-2 m-t_3">See full Guideline: </span><span><a href="www.jacc.org" target="_blank" class="font_0 c_accent h:c_accent-3 m-t_3 underline">4.2.1. Nutrition, Including Supplements</a></span></div></div>
`

function createGuidelindCardAndHeader (category){
    const existingChild = Array.from(selectedDiv.children).find(child => child.id === category); ///.forEach(child=> console.log(child.id))
console.log("existingChild", Boolean(existingChild))


        //check if category card exists
        categoryNames.forEach(categoryType => {

            console.log(category, "\n", categoryType)
   if (!existingChild  &&  category === categoryType){
        //  console.log("doesn't exist")

            //Create the main container div
            const mainContainer = document.createElement('div');
            mainContainer.id = category;

            mainContainer.classList.add('br_1', 'br_primary', 'br_solid', 'font_2', 'font_light', 'p_2', 'p_3', 'm-t_4', 'bg_white');

            // Create the header section
            const headerDiv = document.createElement('div');
            headerDiv.classList.add('br-b_1', 'br_solid', 'br_primary-3', 'flex');
            headerDiv.setAttribute('data-category', category);

            const headerImage = document.createElement('img');
            headerImage.src = `./imgs/tempimage.png`  //${Object.values(filteredGuidelineItem)[0][0].userOutput}.png`;
            headerImage.alt = 'icon SGLT2_Inhibitors_GLP1_Receptor_Agonists';
            headerImage.classList.add('aspect_1x1', 'h_2xlh', 'm-t_0', 'm_3', 'p-t_0',  'w_10');

            const headerTitle = document.createElement('h1');
            headerTitle.classList.add('font_2', 'c_primary', 'font_medium', 'p-b_1', 'p-t_0', 'p_2', 'm-t_0');
            headerTitle.textContent =  category

            headerDiv.appendChild(headerImage);
            headerDiv.appendChild(headerTitle);

            // Append the main container div to the main tag
            mainContainer.appendChild(headerDiv);
            selectedDiv.appendChild(mainContainer)
        }
    });
}


function corColor(cor){
  if (cor === 1 || cor === "1" ){
    return "br_cor-IIB"
  }
  if (cor === "2b" ){
    return "br_cor-IIB"
  }
}


  function  addToCard(category, userOutput, cor ){
    // console.log(buttonSelection, category, outPut, cor)





for( category of categoryNames){
     guidelineDivParent = document.querySelector(`div[data-category="${category}"]`)



            // Create the guideline section
            const guidelineDiv = document.createElement('div');
            guidelineDiv.classList.add('flex', 'items_center', 'justify_center', 'm-b_2', 'm-t_2');

            const guidelineNumber = document.createElement('div');
            guidelineNumber.classList.add('bg_cor-I', 'h_10', 'w_10', 'flex', 'items_center', 'justify_center', 'c_white');
            guidelineNumber.textContent =  cor

            const guidelineItem = document.createElement('div');
            guidelineItem.classList.add('guidelineItem', 'guidelineItem', 'p-l_4', 'w_90', 'flex', 'items_center');
            guidelineItem.textContent = userOutput

            guidelineDiv.appendChild(guidelineNumber);
            guidelineDiv.appendChild(guidelineItem);

            // Create the horizontal line
            const horizontalLine = document.createElement('div');
            horizontalLine.classList.add('br-b_1', 'br_solid', 'br_primary-5', 'p-b_2');

            // Create the paragraph element
            const paragraphElement = document.createElement('p');
            paragraphElement.classList.add('guidelineItem', 'br-l_10', 'br_solid', 'guidelineItem', 'p-l_4');
            paragraphElement.classList.add( corColor(cor))




            // Append all elements to the main container div
            guidelineDivParent.parentElement.appendChild(guidelineDiv);
            guidelineDivParent.appendChild(horizontalLine);


    // Create the link
    const linkElement = document.createElement('div');
    const seeFullTextSpan = document.createElement('span');
    seeFullTextSpan.innerText = "See full Guideline: "
    const createLinkSpan = document.createElement('span');
    seeFullTextSpan.classList.add('font_0', 'c_primary-2', 'm-t_3');
    const createLinkA = document.createElement('a');
    createLinkA.setAttribute('href', "https://www.jacc.org/guidelines/guideline-hubs")
    createLinkA.setAttribute('target', "_blank")
    createLinkA.innerText =  guidlineLinkoutInfo.category
    createLinkA.classList.add('font_0', 'c_accent', 'h:c_accent-3', 'm-t_3', 'underline');
    createLinkSpan.appendChild(createLinkA)
    linkElement.appendChild(seeFullTextSpan)
    linkElement.appendChild(createLinkSpan)


    selectedDiv.lastChild.appendChild(linkElement);
  }

}




let localSelectedDiv;

function createCardLink(localCategory){
    console.log(  Boolean(document.getElementById(localCategory)))
    if( !Boolean(document.getElementById(localCategory))){
        return true
    }
    localSelectedDiv = document.getElementById(localCategory)

    // Create the link
    const linkElement = document.createElement('div');
    const seeFullTextSpan = document.createElement('span');
    seeFullTextSpan.innerText = "See full Guideline: "
    const createLinkSpan = document.createElement('span');
    seeFullTextSpan.classList.add('font_0', 'c_primary-2', 'm-t_3');
    const createLinkA = document.createElement('a');
    createLinkA.setAttribute('href',  guidlineLinkoutInfo[localCategory].url)
    createLinkA.setAttribute('target', "_blank")
    createLinkA.innerText =  guidlineLinkoutInfo[localCategory].text
    createLinkA.classList.add('font_0', 'c_accent', 'h:c_accent-3', 'm-t_3', 'underline');
    createLinkSpan.appendChild(createLinkA)
    linkElement.appendChild(seeFullTextSpan)
    linkElement.appendChild(createLinkSpan)


    localSelectedDiv.lastElementChild.appendChild(linkElement);



}
</script>





<script>

/////
    function addReturnToEvalButton(){

    const buttonDiv = document.createElement('div');
            buttonDiv.id = 'btnReturn';


            const buttonElement = document.createElement('p');
            buttonElement.classList.add("p_4",  "c_white","h:bg_accent-3", "h:c_alert",  "h:c_primary", "m_3","m-t_5", "m-r_0", "float_right", "font_2", "br_radius", "text_center", "bg_accent");
            buttonElement.textContent = 'Return to evaluation';


            buttonDiv.appendChild(buttonElement);
         selectedDiv.appendChild(buttonDiv);

 }


  function performMatchingAndAddGuidelines(){
    //////////////////////////////////
    /////// Data logic Queries ///////
    //////////////////////////////////

let localCategory = "SGLT2 Inhibitors and GLP-1 Receptor Agonists"

    if( buttonSelection.diabetes === "Y"){

        createGuidelindCardAndHeader("SGLT2 Inhibitors and GLP-1 Receptor Agonists")
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-I h_10 w_10 flex items_center justify_center c_white">1</div><div class="guidelineItem p-l_4 w_90 flex items_center">SGLT2 inhibitor or GLP-1 receptor agonists is recommended</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
         }

    if( buttonSelection.LVEFlessOrEqual40 === "Y"){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-IIA h_10 w_10 flex items_center justify_center c_white">2a</div><div class="guidelineItem p-l_4 w_90 flex items_center">SGLT2 inhibitor is recommended irrespective of diabetes status</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
         }

    if( buttonSelection.LVEF41to49 === "Y" ||  buttonSelection.LVEFgreaterOrEqual50 === "Y" ){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-IIB h_10 w_10 flex items_center justify_center c_white">2B</div><div class="guidelineItem p-l_4 w_90 flex items_center">SGLT2 inhibitor can be beneficial  irrespective of diabetes status</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
         }
createCardLink(localCategory)


localCategory = "Beta Blockers"

    if( buttonSelection.LVEFlessOrEqual40 === "Y" &&  buttonSelection.betaBlocker === "N" ){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-I h_10 w_10 flex items_center justify_center c_white">1</div><div class="guidelineItem p-l_4 w_90 flex items_center"> Beta-blocker therapy is recommended</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
         }

    if( buttonSelection.LVEFlessOrEqual40 === "Y" || buttonSelection.LVEF41to49 === "Y" ){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-I h_10 w_10 flex items_center justify_center c_white">1</div><div class="guidelineItem p-l_4 w_90 flex items_center">Sustained release metoprolol succinate, carvedilol, or bisoprolol with titration to target doses is recommended in preference to other beta-blockers</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
        }

    if( buttonSelection.mi === "N" &&  buttonSelection.hxHFrEF === "N" &&
        buttonSelection.LVEFgreaterOrEqual50 === "Y" &&  buttonSelection.betaBlocker === "Y" &&
        buttonSelection.bloodPressureGoal === "N" &&  buttonSelection.angina === "N"){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-IIB h_10 w_10 flex items_center justify_center c_white">2b</div><div class="guidelineItem p-l_4 w_90 flex items_center">It may be reasonable to reassess the indication for long-term (>1 year) use of beta-blocker therapy</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
        }

    if( buttonSelection["mi"] === "N" &&  buttonSelection["hxHFrEF"] === "N" &&
        buttonSelection["LVEFgreaterOrEqual50"] === "Y" &&  buttonSelection["betaBlocker"] === "Y" &&
        buttonSelection["angina"] === "N"){
            createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-III h_10 w_10 flex items_center justify_center c_white">3</div><div class="guidelineItem p-l_4 w_90 flex items_center">Beta-blocker therapy is not beneficial</div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
        }

createCardLink(localCategory)


localCategory = "Lipid Management"

    if( buttonSelection["LDL-C_goal"] === "N" &&  buttonSelection["betaBlocker"] === "N" ){

        createGuidelindCardAndHeader(localCategory)
        document.getElementById(localCategory).innerHTML+= `
        <div class="flex items_center justify_center m-b_2 m-t_2"><div class="bg_cor-I h_10 w_10 flex items_center justify_center c_white">1</div><div class="guidelineItem p-l_4 w_90 flex items_center"> Moderate intensity statin therapy is recommended. </div></div>
        <div class="br-b_1 br_solid br_primary-5 p-b_2"></div>
            `
        }

}
addReturnToEvalButton()

</script>



  <script>
    const grabYesBtns = document.querySelectorAll('.btnYes'),
      grabNoBtns = document.querySelectorAll('.btnNo'),
      grabLVEFBtns = document.querySelectorAll('.btnLVEF'),
      grabAllBtnSets = document.querySelectorAll('.btnSet')


    let grabYesNoBtns = [...grabYesBtns, ...grabNoBtns]


    //Handle three choice buttons/ LVEF
    grabLVEFBtns.forEach(btn => {
      btn.addEventListener('click', (event) => {

        selectedChoiseAddedToDataset(event)
        grabLVEFBtns.forEach(otherBtn => {
          if (otherBtn === btn) {
            // otherBtn.style.backgroundColor = 'bg_success';
            event.target.classList.toggle('bg_success')
            // console.log(buttonSelection[event.target.id])
             buttonSelection[otherBtn.id] = "Y"
            //  event.target.dataset.yn = "Y"
            console.log( "btn:", btn.id)
          } else {
            // otherBtn.style.backgroundColor = 'bg_grey';
            otherBtn.classList.contains('bg_success') ? otherBtn.classList.remove('bg_success') : "";
            otherBtn.classList.contains('bg_alert') ? otherBtn.classList.add('bg_alert') : "";
            console.log( "otherBtn:", otherBtn.id)
            buttonSelection[otherBtn.id] = "N"
          }
        });
      });
    });


    //Handle color change btns
    let toggleClass = (event) => {


      if (event.target.classList.contains('btnYes')) {
        event.target.classList.toggle('bg_grey')
        event.target.classList.toggle('bg_success')
        // event.target.classList.toggle('shadow_overlap-light', !element.classList.contains('shadow_overlap-light'));
        // event.target.classList.toggle('shadow_emboss-bold', !element.classList.contains('shadow_emboss-bold'));
        // event.target.classList.toggle('shadow_overlap-light')
        event.target.classList.contains('shadow_emboss-bold') ? "" : event.target.nextElementSibling.classList.add('shadow_emboss-bold')

        event.target.nextElementSibling.classList.contains('shadow_emboss-bold') ? event.target.nextElementSibling.classList.remove('shadow_emboss-bold') : "";

        event.target.nextElementSibling.classList.contains('bg_alert') ? event.target.nextElementSibling.classList.remove('bg_alert') : "";
        event.target.nextElementSibling.classList.contains('bg_grey') ? "" : event.target.nextElementSibling.classList.add('bg_grey')

      }

      if (event.target.classList.contains('btnNo')) {
        event.target.classList.toggle('bg_grey')
        event.target.classList.toggle('bg_alert')
        // event.target.classList.toggle('shadow_overlap-light', !element.classList.contains('shadow_overlap-light'));
        //     event.target.classList.toggle('shadow_emboss-bold', !element.classList.contains('shadow_emboss-bold'));
        event.target.classList.toggle('shadow_overlap-light')
        event.target.classList.toggle('shadow_emboss-bold')

        event.target.previousElementSibling.classList.contains('shadow_emboss-bold') ? event.target.previousElementSibling.classList.remove('shadow_emboss-bold') : "";

        event.target.previousElementSibling.classList.contains('bg_success') ? event.target.previousElementSibling.classList.remove('bg_success') : "";
        event.target.previousElementSibling.classList.contains('bg_grey') ? "" : event.target.previousElementSibling.classList.add('bg_grey')
      }
    }

function lockUnlockBtnSubmit() {
    console.log(Object.values(buttonSelection))

    if(Object.values(buttonSelection).every(item=> item != "")){
        btnCCD_Submit.classList.remove('texture_cross')
        btnCCD_Submit.classList.add('bg_accent')
    }

    };



    //// Handle  selection buttons ////
    grabYesNoBtns.forEach(element => {
      element.addEventListener('click', (event) => {
        toggleClass(event);
        selectedChoiseAddedToDataset(event)
        lockUnlockBtnSubmit()
      })
    });

    // handle Reset all btn
    let grabBtnResetAll = document.getElementById('btnResetAll')
    grabBtnResetAll.addEventListener('click', () => {
      grabYesNoBtns.forEach(element => {
        element.classList.contains('bg_success') ? element.classList.remove('bg_success') : "";
        element.classList.contains('bg_alert') ? element.classList.remove('bg_alert') : "";
        element.classList.contains('bg_grey') ? '' : element.classList.add('bg_grey');
      })
      grabLVEFBtns.forEach(element => {
        element.classList.contains('bg_success') ? element.classList.remove('bg_success') : "";
        element.classList.contains('bg_grey') ? '' : element.classList.add('bg_grey');
      })

     btnCCD_Submit.classList.contains('bg_accent')? btnCCD_Submit.classList.remove('bg_accent'): "";
     btnCCD_Submit.classList.add('texture_cross')


      setbuttonSelectionToEmpty()

         selectedDiv.innerHTML = `<div class="br_1 br_primary br_solid font_2 font_light p_2 p_4 m-t_4 bg_white">
                    Please complete all of the evaluation questions in  the Evaluate tab then click submit to see recommendations here
                </div>`
     addReturnToEvalButton()
     btnReturn= document.getElementById('btnReturn'),
      btnReturn.addEventListener('click', () => showEvalsHideRecsTab())

    })

  </script>


  <script>

    const btnTabRec = document.getElementById('btnTabRec'),
      btnTabEval = document.getElementById('btnTabEval'),
      displayEvalQuestions = document.getElementById('displayEvalQuestions'),
      displayReturnRecs = document.getElementById('displayReturnRecs');

    let btnReturn= document.getElementById('btnReturn');

    const grabrecsDefault = document.getElementById('recsDefault'),
      grabBetaBlockers = document.getElementById('Beta_Blockers'),
      grabSGLT2_GLP1 = document.getElementById('SGLT2_GLP-1')

    const btnCCD_Submit = document.getElementById('btnCCD_Submit')
    let btnSubmitUnlocked = false;

    // console.log(btnSubmitUnlocked)

    function checkThatAllWQuestionsAreAnswered(){
        buttonSelectionArr = Object.values(buttonSelection)
        buttonSelectionArr.every( item=> item != "")
    }

    // handle submit btn


    btnCCD_Submit.addEventListener('click', () => {
   let buttonIsDisabbled = btnCCD_Submit.classList.contains("texture_cross")
        if(buttonIsDisabbled){
            alert('All fields required, please complete and click Submit')
            return false
        }
      showRecsHideEvalTab()

          //clear previous
    selectedDiv.innerHTML = ""
      performMatchingAndAddGuidelines()
      selectedDiv.innerHTML += automaticRecs
      addReturnToEvalButton()
      btnReturn= document.getElementById('btnReturn'),
      btnReturn.addEventListener('click', () => showEvalsHideRecsTab())
  })


    //Handle tabs
    function showRecsHideEvalTab() {
      displayReturnRecs.classList.contains('display_none') ? displayReturnRecs.classList.remove('display_none') : '';
      btnTabRec.classList.contains('ccdSelectedTab') ? '' : btnTabRec.classList.add('ccdSelectedTab');

      displayEvalQuestions.classList.contains('display_none') ? '' : displayEvalQuestions.classList.add('display_none');
      btnTabEval.classList.contains('ccdSelectedTab') ? btnTabEval.classList.remove('ccdSelectedTab') : '';
    }

    function showEvalsHideRecsTab() {
      displayEvalQuestions.classList.contains('display_none') ? displayEvalQuestions.classList.remove('display_none') : '';
      btnTabEval.classList.contains('ccdSelectedTab') ? '' : btnTabEval.classList.add('ccdSelectedTab');

      displayReturnRecs.classList.contains('display_none') ? '' : displayReturnRecs.classList.add('display_none');
      btnTabRec.classList.contains('ccdSelectedTab') ? btnTabRec.classList.remove('ccdSelectedTab') : '';
    }


    // handle change buttonSelection - value selected object
    function selectedChoiseAddedToDataset(event) {
      // console.log(event.target.parentElement.id)
      // console.log(event.target.dataset.yn)
      buttonSelection[event.target.parentElement.id] = event.target.dataset.yn
    }


    btnReturn.addEventListener('click', () => showEvalsHideRecsTab())

  </script>


</body>

</html>